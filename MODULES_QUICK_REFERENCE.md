# Refer√™ncia R√°pida de M√≥dulos - BotCriptoFy2

## üìã Tabela Master de M√≥dulos

| # | M√≥dulo | Tier | Criticidade | Dependentes | Depend√™ncias | Coverage | Status |
|---|--------|------|-------------|-------------|--------------|----------|--------|
| 1 | **auth** | 1 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 29 | 0 | 95%+ | ‚úÖ |
| 2 | **security** | 1 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 20 | 1 (auth) | 95%+ | ‚úÖ |
| 3 | **audit** | 1 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 15 | 2 (auth, security) | 95%+ | ‚úÖ |
| 4 | **tenants** | 1 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 25 | 1 (auth) | 95%+ | ‚úÖ |
| 5 | **users** | 1 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 5 | 2 (auth, tenants) | 95%+ | ‚úÖ |
| 6 | **rate-limiting** | 1 | ‚≠ê‚≠ê‚≠ê‚≠ê | 0 | 1 (security) | 90%+ | ‚úÖ |
| 7 | **exchanges** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 7 | 3 (auth, tenants, audit) | 90%+ | ‚úÖ |
| 8 | **market-data** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 6 | 1 (exchanges) | 90%+ | ‚úÖ |
| 9 | **orders** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 5 | 3 (exchanges, market-data, audit) | 90%+ | ‚úÖ |
| 10 | **positions** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 3 | 3 (exchanges, orders, market-data) | 90%+ | ‚úÖ |
| 11 | **strategies** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 3 | 3 (market-data, orders, positions) | 90%+ | ‚úÖ |
| 12 | **risk** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 2 | 4 (positions, market-data, orders) | 90%+ | ‚úÖ |
| 13 | **bots** | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 1 | 3 (strategies, orders, risk) | 90%+ | ‚úÖ |
| 14 | **financial** | 3 | ‚≠ê‚≠ê‚≠ê‚≠ê | 3 | 3 (auth, tenants, audit) | 85%+ | ‚úÖ |
| 15 | **banco** | 3 | ‚≠ê‚≠ê‚≠ê‚≠ê | 2 | 4 (auth, tenants, audit, market-data) | 85%+ | ‚úÖ |
| 16 | **subscriptions** | 3 | ‚≠ê‚≠ê‚≠ê‚≠ê | 1 | 3 (auth, tenants, financial) | 85%+ | ‚úÖ |
| 17 | **social-trading** | 4 | ‚≠ê‚≠ê‚≠ê‚≠ê | 0 | 4 (auth, strategies, orders, positions) | 80%+ | ‚úÖ |
| 18 | **p2p-marketplace** | 4 | ‚≠ê‚≠ê‚≠ê | 0 | 3 (auth, banco, audit) | 80%+ | ‚úÖ |
| 19 | **affiliate** | 4 | ‚≠ê‚≠ê‚≠ê | 1 | 2 (auth, tenants) | 80%+ | ‚úÖ |
| 20 | **mmn** | 4 | ‚≠ê‚≠ê‚≠ê | 0 | 3 (auth, tenants, affiliate) | 80%+ | ‚úÖ |
| 21 | **notifications** | 5 | ‚≠ê‚≠ê‚≠ê | 10+ | 2 (auth, tenants) | 80%+ | ‚úÖ |
| 22 | **support** | 5 | ‚≠ê‚≠ê‚≠ê | 1 | 2 (auth, tenants) | 80%+ | ‚úÖ |
| 23 | **sales** | 5 | ‚≠ê‚≠ê‚≠ê | 1 | 2 (auth, tenants) | 80%+ | ‚úÖ |
| 24 | **marketing** | 5 | ‚≠ê‚≠ê‚≠ê | 0 | 2 (auth, tenants) | 80%+ | ‚úÖ |
| 25 | **documents** | 5 | ‚≠ê‚≠ê | 0 | 3 (auth, tenants, security) | 80%+ | ‚úÖ |
| 26 | **departments** | 5 | ‚≠ê‚≠ê | 0 | 2 (auth, tenants) | 80%+ | ‚úÖ |
| 27 | **configurations** | 5 | ‚≠ê‚≠ê | 5+ | 2 (auth, security) | 80%+ | ‚úÖ |
| 28 | **ceo** | 6 | ‚≠ê‚≠ê | 0 | 10+ (v√°rios) | 80%+ | ‚úÖ |

**Total:** 28 m√≥dulos operacionais

---

## üéØ Quick Actions por M√≥dulo

### Tier 1: Infraestrutura (CR√çTICO)

```bash
# auth
bun test src/modules/auth --coverage
GET /auth/session
POST /auth/sign-in
POST /auth/sign-up

# security
bun test src/modules/security --coverage
GET /security/roles
GET /security/permissions
POST /security/roles/:id/permissions

# audit
SELECT * FROM audit_logs WHERE action='order.create' LIMIT 100
GET /audit/logs?entity_type=order

# tenants
GET /tenants/me
GET /tenants/:id/members

# users
GET /users/me
PUT /users/me

# rate-limiting
GET /rate-limit/stats
redis-cli GET rate_limit:user:123
```

### Tier 2: Trading (CR√çTICO)

```bash
# exchanges
/exchange-test Binance BTC/USDT
GET /exchanges
POST /exchanges
GET /exchanges/:id/balance

# market-data
GET /market-data/ohlcv?symbol=BTC/USDT&timeframe=1h
GET /market-data/ticker?symbol=BTC/USDT
redis-cli GET market:ticker:BTC/USDT

# orders
POST /orders {"type":"limit","side":"buy","symbol":"BTC/USDT","amount":0.01,"price":50000}
GET /orders?status=open
DELETE /orders/:id

# positions
GET /positions?status=open
GET /positions/:id
POST /positions/:id/close

# strategies
/strategy-validate minha-estrategia
POST /strategies/:id/backtest
GET /strategies/:id/signals

# risk
GET /risk/portfolio
GET /risk/var
GET /risk/position-size?symbol=BTC/USDT&risk_percent=2

# bots
POST /bots {"type":"grid","config":{...}}
POST /bots/:id/start
POST /bots/:id/stop
GET /bots/:id/performance
```

### Tier 3: Financeiro

```bash
# financial
GET /financial/invoices
POST /financial/payments
GET /financial/reports/tax

# banco
GET /banco/wallets
POST /banco/wallets/transfer
GET /banco/portfolio
GET /banco/portfolio/performance

# subscriptions
GET /subscriptions/plans
POST /subscriptions/subscribe
GET /subscriptions/usage
```

### Tier 4: Social Trading

```bash
# social-trading
GET /social/traders?verified=true
POST /social/follow/:traderId
POST /social/copy-settings
GET /social/leaderboard
GET /social/feed
POST /social/signals

# p2p-marketplace
GET /p2p/orders
POST /p2p/orders
POST /p2p/trades/:id/complete

# affiliate
GET /affiliate/stats
POST /affiliate/withdraw
GET /affiliate/referrals

# mmn
GET /mmn/genealogy
GET /mmn/network
```

### Tier 5: Operacional

```bash
# notifications
GET /notifications
PUT /notifications/:id/read

# support
GET /support/tickets
POST /support/tickets
GET /support/kb/articles

# sales
GET /sales/contacts
GET /sales/deals
GET /sales/pipeline

# marketing
GET /marketing/campaigns
POST /marketing/campaigns/:id/send

# documents
GET /documents
POST /documents/upload
GET /documents/:id/download

# departments
GET /departments
GET /departments/:id/members

# configurations
GET /configurations
PUT /configurations/:key
```

### Tier 6: Executivo

```bash
# ceo
GET /ceo/dashboard
GET /ceo/kpis
GET /ceo/metrics/revenue
GET /ceo/metrics/users
```

---

## üîç Comandos de Diagn√≥stico

### Health Checks

```bash
# Sistema inteiro
/project-health-check

# M√≥dulo espec√≠fico
GET /health
GET /

# Database
psql -d botcripto -c "SELECT COUNT(*) FROM users"
psql -d botcripto -c "SELECT COUNT(*) FROM orders WHERE status='open'"

# Redis
redis-cli PING
redis-cli INFO stats
redis-cli DBSIZE

# Logs
tail -f /var/log/botcripto/app.log
tail -f /var/log/botcripto/error.log
grep "ERROR" /var/log/botcripto/*.log | tail -20
```

### Performance

```bash
# Prometheus metrics
GET /metrics
curl http://localhost:3000/metrics | grep http_request_duration

# Database slow queries
SELECT query, calls, mean_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;

# Redis slowlog
redis-cli SLOWLOG GET 10

# Process monitoring
ps aux | grep bun
top -p $(pgrep -f "bun run dev")
```

### Debugging

```bash
# TypeScript check
bun run typecheck

# Linting
bun run lint

# Tests
bun test
bun test src/modules/exchanges --coverage

# Build
bun run build
```

---

## üìä Matriz de Impacto de Mudan√ßas

| M√≥dulo Modificado | Impacto | M√≥dulos Afetados | Tempo Estimado | Risco |
|-------------------|---------|------------------|----------------|-------|
| **auth** | CR√çTICO | 29 m√≥dulos | 2-4 semanas | üî¥ Alto |
| **security** | CR√çTICO | 20 m√≥dulos | 1-2 semanas | üî¥ Alto |
| **audit** | ALTO | 15 m√≥dulos | 1 semana | üü† M√©dio |
| **tenants** | CR√çTICO | 25 m√≥dulos | 2-3 semanas | üî¥ Alto |
| **exchanges** | ALTO | 7 m√≥dulos | 1-2 semanas | üü† M√©dio |
| **market-data** | ALTO | 6 m√≥dulos | 1 semana | üü† M√©dio |
| **orders** | ALTO | 5 m√≥dulos | 3-5 dias | üü† M√©dio |
| **strategies** | M√âDIO | 3 m√≥dulos | 2-3 dias | üü° Baixo |
| **social-trading** | BAIXO | 0 m√≥dulos | 1-2 dias | üü¢ Muito Baixo |
| **ceo** | BAIXO | 0 m√≥dulos | 1 dia | üü¢ Muito Baixo |

---

## üîó Links R√°pidos

### Documenta√ß√£o do Projeto

- [AGENTS.md](./AGENTS.md) - 53 Regras de Ouro
- [CLAUDE.md](./CLAUDE.md) - Instru√ß√µes para agentes
- [MODULES_ANALYSIS.md](./MODULES_ANALYSIS.md) - An√°lise completa
- [MODULES_DETAILED.md](./MODULES_DETAILED.md) - Detalhamento t√©cnico
- [MODULES_WORKFLOW.md](./MODULES_WORKFLOW.md) - Workflows pr√°ticos
- [IMPLEMENTACAO.md](./docs/IMPLEMENTACAO.md) - Status de implementa√ß√£o

### Comandos Personalizados

```bash
/agent-cto-validate              # Validar protocolo completo
/project-init novo-modulo        # Inicializar novo m√≥dulo
/dev-analyze-dependencies        # Analisar depend√™ncias
/dev-code-review                 # Code review profundo
/exchange-test Binance BTC/USDT  # Testar exchange
/strategy-validate               # Validar estrat√©gia
/backtest-run                    # Executar backtest
/project-health-check            # Verificar sa√∫de
```

### Ferramentas Externas

- **Swagger Docs:** http://localhost:3000/swagger
- **Prometheus:** http://localhost:9090 (se configurado)
- **Redis CLI:** `redis-cli`
- **PostgreSQL:** `psql -d botcripto`
- **TimescaleDB:** `psql -d botcripto -c "SELECT * FROM timescaledb_information.hypertables"`

---

## ‚ö° Atalhos de Desenvolvimento

### Setup Inicial

```bash
# Clone e setup
git clone <repo>
cd BotCriptoFy2/backend
bun install

# Configurar .env
cp .env.example .env
# Editar .env com suas credenciais

# Setup database
bun run db:push
bun run db:seed

# Iniciar desenvolvimento
bun run dev
```

### Desenvolvimento Di√°rio

```bash
# Terminal 1: Dev server
cd backend && bun run dev

# Terminal 2: Tests em watch mode
cd backend && bun test --watch

# Terminal 3: Logs
tail -f /var/log/botcripto/app.log

# Terminal 4: Comandos ad-hoc
redis-cli MONITOR
```

### Pre-Commit

```bash
# Antes de commit
bun run lint
bun run typecheck
bun test
/dev-code-review src/modules/novo-modulo
```

### Pre-Deploy

```bash
# Checklist completo
/project-health-check
bun run build
bun test --coverage
docker-compose up -d
```

---

## üéì N√≠vel de Complexidade

| M√≥dulo | Complexidade | Linhas de C√≥digo | Especialistas Necess√°rios |
|--------|--------------|------------------|---------------------------|
| **exchanges** | üî¥ Muito Alta | 2000+ | CCXT, Crypto APIs |
| **market-data** | üî¥ Muito Alta | 1500+ | TimescaleDB, Real-time |
| **social-trading** | üü† Alta | 3658 | Trading, Social features |
| **strategies** | üü† Alta | 2500+ | TA, Backtesting |
| **risk** | üü† Alta | 1000+ | Quant Finance, Stats |
| **bots** | üü† Alta | 1500+ | Automation, Trading |
| **financial** | üü° M√©dia | 2000+ | Payments, Tax |
| **auth** | üü° M√©dia | 800+ | Better-Auth, Security |
| **banco** | üü° M√©dia | 1200+ | Wallets, Crypto |
| **ceo** | üü¢ Baixa | 500+ | Analytics, Dashboards |

**Legenda:**
- üî¥ Muito Alta: Requer 2+ especialistas, 2+ semanas
- üü† Alta: Requer 1 especialista, 1 semana
- üü° M√©dia: Dev s√™nior, 3-5 dias
- üü¢ Baixa: Dev mid/junior, 1-2 dias

---

*√öltima atualiza√ß√£o: 2025-10-17*
*Vers√£o: 1.0.0*
